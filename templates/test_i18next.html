<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>i18next æµ‹è¯•é¡µé¢</title>
    
    <!-- i18next æ ¸å¿ƒåº“ -->
    <script src="https://cdn.jsdelivr.net/npm/i18next@23.7.6/dist/umd/i18next.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/i18next-browser-languagedetector@7.2.0/dist/umd/i18nextBrowserLanguageDetector.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/i18next-http-backend@2.4.2/dist/umd/i18nextHttpBackend.min.js"></script>
    <!-- i18next åˆå§‹åŒ–è„šæœ¬ -->
    <script src="/static/i18n-i18next.js"></script>
    
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        .test-section { margin: 20px 0; padding: 20px; border: 1px solid #ccc; border-radius: 8px; }
        button { margin: 10px; padding: 10px 20px; font-size: 16px; cursor: pointer; }
        .status { margin-top: 20px; padding: 10px; background: #f0f0f0; border-radius: 4px; }
    </style>
</head>
<body>
    <h1>i18next è¿ç§»æµ‹è¯•é¡µé¢</h1>
    
    <div class="test-section">
        <h2>æµ‹è¯• 1: data-i18n å±æ€§</h2>
        <p data-i18n="chat.title">ğŸ’¬ å¯¹è¯</p>
        <p data-i18n="voice.title">éŸ³è‰²æ³¨å†Œ</p>
    </div>
    
    <div class="test-section">
        <h2>æµ‹è¯• 2: data-i18n-placeholder</h2>
        <input type="text" data-i18n-placeholder="chat.textInputPlaceholder" placeholder="æ–‡å­—èŠå¤©æ¨¡å¼...">
    </div>
    
    <div class="test-section">
        <h2>æµ‹è¯• 3: JavaScript window.t() å‡½æ•°</h2>
        <div id="dynamic-text"></div>
        <button onclick="updateDynamicText()">æ›´æ–°åŠ¨æ€æ–‡æœ¬</button>
    </div>
    
    <div class="test-section">
        <h2>æµ‹è¯• 4: è¯­è¨€åˆ‡æ¢</h2>
        <button onclick="switchToChinese()">åˆ‡æ¢åˆ°ä¸­æ–‡</button>
        <button onclick="switchToEnglish()">Switch to English</button>
        <div class="status" id="status">å½“å‰è¯­è¨€: <span id="current-lang">-</span></div>
    </div>
    
    <div class="test-section">
        <h2>æµ‹è¯• 5: å‚æ•°æ’å€¼</h2>
        <div id="param-test"></div>
    </div>
    
    <script>
        // æ›´æ–°åŠ¨æ€æ–‡æœ¬
        function updateDynamicText() {
            const div = document.getElementById('dynamic-text');
            if (window.t) {
                div.textContent = window.t('voice.title');
            } else {
                div.textContent = 'window.t() æœªå®šä¹‰';
            }
        }
        
        // è¯­è¨€åˆ‡æ¢å‡½æ•°
        async function switchToChinese() {
            if (window.setLocale) {
                await window.setLocale('zh-CN');
                updateStatus();
            } else {
                alert('window.setLocale() æœªå®šä¹‰');
            }
        }
        
        async function switchToEnglish() {
            if (window.setLocale) {
                await window.setLocale('en');
                updateStatus();
            } else {
                alert('window.setLocale() æœªå®šä¹‰');
            }
        }
        
        // æ›´æ–°çŠ¶æ€æ˜¾ç¤º
        function updateStatus() {
            const langSpan = document.getElementById('current-lang');
            if (window.getLocale) {
                langSpan.textContent = window.getLocale();
            } else {
                langSpan.textContent = 'æœªçŸ¥';
            }
            
            // æ›´æ–°å‚æ•°æµ‹è¯•
            const paramDiv = document.getElementById('param-test');
            if (window.t) {
                paramDiv.textContent = window.t('app.catgirlResting', {name: 'æµ‹è¯•çŒ«å¨˜'});
            }
        }
        
        // ç›‘å¬è¯­è¨€å˜åŒ–
        window.addEventListener('localechange', () => {
            console.log('è¯­è¨€å·²åˆ‡æ¢:', window.getLocale ? window.getLocale() : 'æœªçŸ¥');
            updateStatus();
            updateDynamicText();
        });
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // ç­‰å¾… i18next åˆå§‹åŒ–å®Œæˆ
            setTimeout(() => {
                updateStatus();
                updateDynamicText();
            }, 500);
        });
    </script>
</body>
</html>

